<section id="project-detail"
  class="relative w-full flex flex-col justify-start items-center text-primary px-6 pt-32 pb-24 overflow-hidden">

  <!-- FONDO CANVAS -->
  <canvas id="detailCanvas" class="absolute inset-0 w-full h-full"></canvas>

  <!-- CARD PRINCIPAL -->
  <div
    class="relative z-10 max-w-4xl mx-auto bg-[#0d0f18]/80 backdrop-blur-xl rounded-xl
           shadow-[0_0_25px_rgba(61,139,255,0.25)] overflow-hidden border border-slate-700/40 p-6 
           mt-24 md:mt-0">

    <!-- GALERÍA -->
    <div class="gallery-wrapper relative">

      <!-- Contador -->
      <div class="gallery-counter" *ngIf="project?.gallery?.length">
        {{ currentIndex + 1 }} / {{ project!.gallery.length }}
      </div>

      <!-- Imagen principal -->
      <div class="gallery-main rounded-xl overflow-hidden">
        <img
          [src]="selectedImage"
          class="gallery-main-img"
          [class.fade]="isFading"
        />
      </div>

      <!-- Flecha Izquierda -->
      <button class="gallery-nav left" (click)="prevImage()">‹</button>

      <!-- Flecha Derecha -->
      <button class="gallery-nav right" (click)="nextImage()">›</button>

      <!-- Thumbnails -->
      <div class="gallery-thumbs mt-4 flex gap-3 overflow-x-auto pb-3">
        <img
          *ngFor="let img of project?.gallery; let i = index"
          [src]="img.thumb"
          [class.active]="i === currentIndex"
          (click)="selectImage(i)"
          class="thumb-img"
        />
      </div>
    </div>

    <!-- CONTENIDO DEL PROYECTO -->
    <div class="mt-10 flex flex-col gap-6">

      <!-- Íconos de Tecnologías (arriba del título) -->
      <div class="detail-tech flex gap-4 items-center">
        <img
          *ngFor="let t of project?.tech"
          [src]="'assets/icons/' + t + '.svg'"
          class="w-10 h-10 opacity-90 hover:opacity-100 hover:scale-110 transition"
        />
      </div>

      <!-- Título -->
      <h2 class="detail-title text-4xl font-bold text-accent-blue drop-shadow-xl">
        {{ project?.title }}
      </h2>

      <!-- Descripción -->
      <p class="detail-description text-secondary leading-relaxed">
        {{ project?.longDescription }}
      </p>

      <!-- Botones -->
      <div class="detail-links flex gap-4 mt-6">

        <!-- GitHub botón -->
        <a
          [href]="project?.github"
          target="_blank"
          class="detail-btn-glass flex items-center gap-2"
        >
          <img src="assets/icons/github.svg" class="w-5 h-5 filter-white" />
          <span>GitHub</span>
        </a>

        <!-- Demo botón -->
        <a
          *ngIf="project?.demo"
          [href]="project?.demo"
          target="_blank"
          class="detail-btn-orange flex items-center gap-2"
        >
          <img src="assets/icons/external-link.svg" class="w-5 h-5 opacity-90" />
          <span>Demo</span>
        </a>

      </div>

      <!-- BOTÓN VOLVER -->
      <button
        (click)="volverAProjects()"
        class="detail-back-btn flex items-center gap-3 mt-10"
      >
        <svg class="arrow-cyber" width="32" height="18" viewBox="0 0 32 18" fill="none"
            xmlns="http://www.w3.org/2000/svg">
          <path d="M30 9H2M2 9L10 2M2 9L10 16"
                stroke="currentColor"
                stroke-width="3"
                stroke-linecap="round"
                stroke-linejoin="round"/>
        </svg>

        Volver a Proyectos
      </button>

    </div>

  </div>
</section>
